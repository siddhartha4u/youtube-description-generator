<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>YouTube Description Generator</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    body { font-family: 'Inter', sans-serif; background-color: #0d1117; }
  </style>
</head>
<body>
  <div id="app"></div>

  <script>
    const apiKey = "AIzaSyC3m6k8ONG67lMr3YMEGT4svIWaYxig-BY"; // Replace with your real API key before running

    let title = "";
    let primaryKeyword = "";
    let secondaryKeywords = "";
    let descriptions = [];
    let loading = false;
    let error = "";

    const copyToClipboard = text => {
      const temp = document.createElement("textarea");
      temp.value = text;
      document.body.appendChild(temp);
      temp.select();
      document.execCommand("copy");
      document.body.removeChild(temp);
    };

    const spinner = () => `
      <svg class="animate-spin h-5 w-5 text-white mx-auto" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
        <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
        <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z"></path>
      </svg>`;

    const render = () => {
      document.getElementById("app").innerHTML = `
        <div class="min-h-screen bg-gray-900 text-white p-4 sm:p-8 flex justify-center">
          <div class="bg-gray-800 p-6 sm:p-10 rounded-xl shadow-2xl w-full max-w-4xl">
            <h1 class="text-3xl sm:text-4xl font-extrabold text-center mb-6 text-transparent bg-clip-text bg-gradient-to-r from-blue-400 to-purple-600">
              YouTube Description Generator ✍️
            </h1>
            <p class="text-center text-gray-400 mb-8 max-w-xl mx-auto">
              Enter your YouTube title, primary keyword, and optional secondary keywords. Get 5 descriptions including all keywords, each between 100–120 words.
            </p>

            <div class="space-y-5">
              <div>
                <label class="block mb-1 font-bold text-gray-300">YouTube Title</label>
                <input id="title" type="text" value="${title}" placeholder="e.g., How to Edit Videos Like a Pro"
                       class="w-full p-3 rounded-lg bg-gray-700 text-white border border-gray-600 focus:outline-none focus:ring-2 focus:ring-purple-500"
                       ${loading ? 'disabled' : ''}/>
              </div>

              <div>
                <label class="block mb-1 font-bold text-gray-300">Primary Keyword</label>
                <input id="primary" type="text" value="${primaryKeyword}" placeholder="e.g., Video Editing"
                       class="w-full p-3 rounded-lg bg-gray-700 text-white border border-gray-600 focus:outline-none focus:ring-2 focus:ring-purple-500"
                       ${loading ? 'disabled' : ''}/>
              </div>

              <div>
                <label class="block mb-1 font-bold text-gray-300">Secondary Keywords (comma separated)</label>
                <input id="secondary" type="text" value="${secondaryKeywords}" placeholder="e.g., Premiere Pro, Cut Scenes, YouTube Editing"
                       class="w-full p-3 rounded-lg bg-gray-700 text-white border border-gray-600 focus:outline-none focus:ring-2 focus:ring-purple-500"
                       ${loading ? 'disabled' : ''}/>
              </div>

              <button id="generate" ${loading ? 'disabled' : ''}
                      class="w-full p-4 rounded-lg font-bold text-white transition-all
                      ${loading ? 'bg-gray-600 cursor-not-allowed' :
                         'bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700 transform hover:scale-105'}">
                ${loading ? spinner() : "Generate Description"}
              </button>

              ${error ? `<p class="text-red-400 text-center">${error}</p>` : ''}

              ${descriptions.length > 0 ? `
                <div class="mt-8">
                  <h2 class="text-xl font-bold text-gray-200 text-center mb-4">Generated Descriptions</h2>
                  <div class="grid gap-4">
                    ${descriptions.map(desc => `
                      <div class="bg-gray-700 p-4 rounded-lg">
                        <p class="mb-4 whitespace-pre-line">${desc}</p>
                        <button class="copy p-2 bg-green-500 hover:bg-green-600 rounded text-white" data-desc="${desc.replace(/"/g, '&quot;')}">Copy</button>
                      </div>`).join('')}
                  </div>
                </div>` : ''}
            </div>
          </div>
        </div>
      `;

      document.getElementById("title").oninput = e => title = e.target.value;
      document.getElementById("primary").oninput = e => primaryKeyword = e.target.value;
      document.getElementById("secondary").oninput = e => secondaryKeywords = e.target.value;
      document.getElementById("generate").onclick = generateDescriptions;

      document.querySelectorAll('.copy').forEach(btn =>
        btn.onclick = () => copyToClipboard(btn.dataset.desc));
    };

    async function generateDescriptions() {
      if (!title.trim() || !primaryKeyword.trim()) {
        error = "Please fill in the YouTube Title and Primary Keyword.";
        render();
        return;
      }

      loading = true; error = ""; descriptions = []; render();

      const secKeywordsArray = secondaryKeywords
        .split(",")
        .map(k => k.trim())
        .filter(k => k).slice(0, 5);

      const allKeywords = [primaryKeyword, ...secKeywordsArray].join(", ");

      const prompt = `
You are a YouTube description expert.
Generate a JSON array of 5 unique YouTube descriptions.
Each description should:
- Include this title: "${title}"
- Include these keywords: ${allKeywords}
- Be 100–120 words long
- Start with a strong hook
- Mention the primary and secondary keywords naturally
- Include a call-to-action (Subscribe, Like, Watch Now, etc.)
- End with 2–3 relevant hashtags
Return only a JSON array of strings.`;

      const payload = {
        contents: [{ role: "user", parts: [{ text: prompt }] }],
        generationConfig: {
          responseMimeType: "application/json",
          responseSchema: { type: "ARRAY", items: { type: "STRING" } }
        }
      };

      const url = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:generateContent?key=${apiKey}`;

      try {
        const res = await fetch(url, {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify(payload)
        });

        const json = await res.json();
        const raw = json?.candidates?.[0]?.content?.parts?.[0]?.text;
        descriptions = Array.isArray(JSON.parse(raw)) ? JSON.parse(raw) : [];
      } catch (err) {
        console.error(err);
        error = "Failed to generate. Try again later.";
      }

      loading = false;
      render();
    }

    render();
  </script>
</body>
</html>
